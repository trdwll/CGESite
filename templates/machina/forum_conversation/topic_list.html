{% load i18n %}
{% load forum_conversation_tags %}
{% load forum_tracking_tags %}


<table class="table table-bordered table-dashed">
<thead>
	<tr>
		<th class="d-none d-md-table-cell" style="width: 6%;" scope="col"></th>
		<th scope="col">{% trans topic_list_title %}</th>
		<th class="text-center" style="width: 5%" scope="col">{% trans "Replies" %}</th>
		<th class="d-none d-sm-table-cell text-center" style="width: 5%" scope="col">{% trans "Views" %}</th>
		<th class="d-none d-lg-table-cell" style="width: 18%" scope="col">{% trans "Last post" %}</th>
	</tr>
</thead>
{% if topics or not hide_if_empty %}
<tbody>
{% for topic in topics %}
<tr>
	<td class="d-none d-md-table-cell py-0 px-2">
		<i class="fas {% if topic.is_sticky %}fa-lightbulb{% elif topic.is_announce %}fa-info{% else %}fa-dot-circle-o{% endif %} fa-2x"></i>
	</td>
	<td>
		<h6 class="table-title"><a href="{% url 'forum_conversation:topic' topic.forum.slug topic.forum.pk topic.slug topic.pk %}">{{ topic.subject }}</a>{% if topic.is_locked %}&nbsp;<i class="fa fa-times-circle locked-indicator" title="{% trans 'This topic is locked' %}"></i>{% endif %}</h6>
		<p class="table-text">
			{% if topic.poster %}
			{% url 'forum_member:profile' topic.poster_id as poster_url %}
			{% blocktrans trimmed with poster_url=poster_url username=topic.poster.username creation_date=topic.created %}
			by <a href="{{ poster_url }}">{{ username }}</a> on {{ creation_date }}
			{% endblocktrans %}
			{% else %}
			{% blocktrans trimmed with poster_username=topic.first_post.username creation_date=topic.created %}
			by {{ username } on {{ creation_date }}
			{% endblocktrans %}
			{% endif %}
		</p>
	</td>
	<td class="text-center">327</td>
	<td class="d-none d-sm-table-cell text-center">64</td>
	<td class="d-none d-lg-table-cell">
	{% with last_post=topic.last_post %}
	{% if last_post.poster %}
	{% url 'forum_member:profile' last_post.poster_id as poster_url %}
	{% blocktrans trimmed with poster_url=poster_url username=last_post.poster.username %}
		<a class="table-subtitle" href="{{ poster_url }}">{{ username }}</a>
	{% endblocktrans %}
	{% else %}
	{% blocktrans trimmed with poster_username=last_post.username %}
		{{ poster_username }}
	{% endblocktrans %}
	{% endif %}
		<div class="table-meta">{{ last_post.created }}</div>
	</td>
	{% endwith %}
</tr>
{% endfor %}
{% endif %}
</tbody>
</table>
